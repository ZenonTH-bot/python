% header.tex -- include this with pandoc --include-in-header=header.tex
% LaTeX header: styles for code blocks and inline code (tcolorbox + listings)
\usepackage{xcolor}
\usepackage{tcolorbox}
\usepackage{listings}
\usepackage{fontspec}

% Fonts (xelatex): monospace
\setmonofont{DejaVu Sans Mono}

% Colors (adjust hex as you like)
\definecolor{CodeBack}{HTML}{F5F7FA}      % background for code blocks
\definecolor{CodeFrame}{HTML}{D0D7E0}     % frame color
\definecolor{CodeText}{HTML}{0B1B2B}      % normal code text
\definecolor{CodeKeyword}{HTML}{7B1FA2}   % keyword
\definecolor{CodeString}{HTML}{0B8A3E}    % string
\definecolor{CodeComment}{HTML}{6A6F73}   % comment
\definecolor{InlineCodeBack}{HTML}{FFF3CD} % inline code background
\definecolor{InlineCodeText}{HTML}{D32F2F} % inline code text color

% tcolorbox wrapper for code blocks
\tcbset{
  mycodebox/.style={
    colback=CodeBack,
    colframe=CodeFrame,
    arc=1mm,
    boxrule=0.5pt,
    left=1mm, right=1mm, top=1mm, bottom=1mm,
    boxsep=2pt,
    fontupper=\small\ttfamily\color{CodeText}
  }
}

% Inline code box macro
\newtcbox{\InlineCodeBox}{on line, boxsep=0.6mm, colback=InlineCodeBack,
  colframe=InlineCodeBack, fontupper=\ttfamily\color{InlineCodeText},
  boxrule=0pt, arc=1mm}

% Macros used by Lua filter
\newcommand{\CodeBoxBegin}{\begin{tcolorbox}[mycodebox]}
\newcommand{\CodeBoxEnd}{\end{tcolorbox}}
\newcommand{\InlineCode}[1]{\InlineCodeBox{#1}}

% listings fallback settings (if used)
\lstset{
  basicstyle=\ttfamily\small\color{CodeText},
  keywordstyle=\color{CodeKeyword}\bfseries,
  stringstyle=\color{CodeString},
  commentstyle=\color{CodeComment}\itshape,
  backgroundcolor=\color{CodeBack},
  frame=single,
  rulecolor=\color{CodeFrame},
  frameround=tttt,
  breaklines=true,
  showstringspaces=false
}